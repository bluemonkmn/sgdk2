<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Scrolling Game Development Kit 2 - Multi-player Tutorial</title>
  <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1" />
  <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5" />
  <link rel="stylesheet" href="SGDK2Help.css" type="text/css" />
</head>

<body>
  <h1>Tutorial 2 - Multi-player Game from Template</h1>

  <p>Using templates can greatly simplify the process of creating or adding elements to a game. As such, this tutorial turns out to be trivial, but you may want to review it so you are aware of what is available.</p>

  <ol>
    <li>Open the File menu, and from the "New" pop-up menu, select "Scrolling Game Development Kit Sample Project".</li>

    <li>Save the project by selecting "Save Project" from the file menu. The environment needs to know where to put all the project-related files (including the compiled executable), so it's necessary to save the project to a particular location before running it in order to determine where the project's files will reside.</li>
  </ol>

  <p>When you run the project, you will notice that you have the option to begin a single or multi-player game. If you begin a multi-player game, the controls for the second player (which can be seen and adjusted in the Tools-&gt;Options menu) will control a second player in the right-hand pane. You can define your own project templates that appear in the New menu by saving a project in the Library\Projects folder. It is recommended that source code that is the same as the default be deleted from the template project because the environment will automatically add the built-in source code when creating a project from a template.</p>

  <h2>Adding another player</h2>

  <p>To demonstrate a bit more about how multi-player games work, consider the following steps that are required to change the "2 player game" option into a "3 player game" option:</p>

  <ol>
    <li>Change the 2 to a 3 on the menu screen

      <ol>
        <li>In the main project tree view, expand "Maps", "Menu", "Layers", "Letters" and double-click on "Editor".</li>

        <li>Select the "3" tile in the "Tiles" tab.</li>

        <li>Click on the "2" to replace it with "3".</li>
      </ol>
    </li>

    <li>Increase maximum number of players and views to 3.

      <ol>
        <li>From the project tree, Expand "Counters" and select "Players".</li>

        <li>Edit the "Players" counter by selecting "Properties" from the view menu or "Edit" from the context menu, or by double-clicking "Players".</li>

        <li>Change "Maximum" from 2 to 3.</li>

        <li>Select the top/root node of the project tree. This node contains project-wide properties.</li>

        <li>Edit this node by selecting "Properties" from the view menu, selecting "Edit" fromt he context menu, or double-clicking it.</li>

        <li>Change MaxPlayers to 3.</li>

        <li>Change MaxViews to 4. (There is no 3-player view layout.)</li>
      </ol>
    </li>

    <li>Create a graphic to split views horizontally

      <ol>
        <li>Create a new graphic sheet by selecting "Graphic Sheets" in the project tree and selecting "New Object" from the File menu or "New" from the context menu or toolbar.</li>

        <li>Enter the name "HSplitter", and specify a CellHeight of 15, CellWidth of 128, Columns of 1 and Rows of 2.</li>

        <li>Add the graphic sheet and edit it.</li>

        <li>Select "Gradient Fill" from the Tools menu.</li>

        <li>Un-check "Anti-Alias" in the tools menu.</li>

        <li>Right-click on the color white in the color selector panel so select white as the "Solids" color.</li>

        <li>In the magnified view pane, drag the mouse from coordinate 0,7 to 0,15 and release.</li>

        <li>Select the bottom cell from "Cell Manager"</li>

        <li>Click the "Store to Selected Cell(s)" button in the Cell Manager pane.</li>

        <li>Add a new Frameset in the project tree.</li>

        <li>Enter the name "HSplitterFrames" for the new frameset.</li>

        <li>Select "HSplitter" the the "Graphic Sheet" dropdown list.</li>

        <li>Select both cells from the "HSplitter" graphic sheet and add them to the frameset by clicking the arrow button in the toolbar or selecting "Add Selected Cells to Frameset" from the "Frameset" menu.</li>

        <li>Add a new Tileset in the project tree.</li>

        <li>Enter the name "HSplitterTiles".</li>

        <li>Select "HSplitterFrames" in the "Frameset" dropdown list.</li>

        <li>Enter 128 as the tile width and 15 as the tile height.</li>

        <li>The graphics are now ready for use on a map. Close all the open child windows.</li>
      </ol>
    </li>

    <li>Add a new layer with a horizontal splitter to the overlay map.

      <ol>
        <li>In the project tree, under Maps-&gt;Overlay for 2 players, select the "Layers" node.</li>

        <li>Select "New" to add a new layer for this map.</li>

        <li>Enter a name of "HorizontalSplitter" for the new layer.</li>

        <li>Change "ScrollRateX" and "ScrollRateY" to 0.</li>

        <li>Select "HSplitterTiles" as teh value for "Tileset".</li>

        <li>Set OffsetY to 293 (half the height of the display minus half the height of the splitter graphic).</li>

        <li>Set SizeInTiles to 7,1.</li>

        <li>Set ZIndex to 1.</li>

        <li>Click the "Add" button to add the layer.</li>

        <li>When the layer editor appears, select the horizontal splitter graphic from the "Tiles" tab.</li>

        <li>Across the top of the layer, draw a horizontal splitter in all 7 tiles of the layer. (If you need help seeing where the layer is, select "Layer Edges" from the View menu.)</li>

        <li>The splitter is done. Close all child windows.</li>
      </ol>
    </li>

    <li>Change rules on menu screen to correspond to 3-players instead of 2.

      <ol>
        <li>Open the "Select Menu Items" plan from Maps-&gt;Menu-&gt;Layers-&gt;Letters-&gt;Plans.</li>

        <li>Expand "If down is pressed".</li>

        <li>Expand "Else if up is pressed".</li>

        <li>Expand "Else if Return/Enter is pressed".</li>

        <li>Expand "If 1 player game selected".</li>

        <li>Expand "Else if 2 player game selected".</li>

        <li>Select "Set 2 players".</li>

        <li>Change the Value parameter to "3" instead of "2".</li>

        <li>Optional: Change the names of all the rules that refer to 2 players to 3 instead.</li>
      </ol>
    </li>

    <li>Change the 2 player overlay map to a 3 player overlay map.

      <ol>
        <li>Select Maps-&gt;Overlay for 2 players.</li>

        <li>Edit the map parameters by double-clicking, by selecting Properties from the view menu, or selecting Edit from the context menu.</li>

        <li>Change the name of the map from "Overlay for 2 players" to "Overlay for 3 players".</li>

        <li>Click the Update button.</li>

        <li>Open the map editor from Layers-&gt;Inventory-&gt;Editor below the "Overlay for 3 players" node.</li>

        <li>Select "Snap to Tiles" from the Edit menu.</li>

        <li>Select "Add Plan" from the Edit menu.</li>

        <li>Select the new plan "Overlay for 3 players Plan 1" from the top listbox.</li>

        <li>Change the name of the plan in the property grid to "Player 3 Cherries".</li>

        <li>Move the mouse so the second status bar panel reads "Tile X,Y: 1,10" and click once.</li>

        <li>Move the mouse to Tile 11,11 and click once more.</li>

        <li>Add another plan by select "Add Plan" from the Edit menu, naming it "Player 3 Grapes" and adding corner points at tiles 1,11 and 11,12.</li>

        <li>Add a third plan with the name "Player 3 Ice Creams" and corners at tile 1,12 and 11,13.</li>

        <li>Add a fourth plan with the name "Player 3 score" and corners at tile 1,13 and 6,14.</li>
      </ol>
    </li>

    <li>Add counters to track player 3's inventory.

      <ol>
        <li>Select "Counters" in the project tree pane.</li>

        <li>Select "New Object" from the file menu or "New" from the context menu.</li>

        <li>Enter the name "Player 3 grapes", set the maximum to 10 and the value to 0.</li>

        <li>Select "New Object" from the file menu or "New" from the context menu.</li>

        <li>Enter the name "Player 3 cherries", set the maximum to 10 and the value to 0.</li>

        <li>Select "New Object" from the file menu or "New" from the context menu.</li>

        <li>Enter the name "Player 3 ice cream", set the maximum to 10 and the value to 0.</li>

        <li>Select "New Object" from the file menu or "New" from the context menu.</li>

        <li>Enter the name "Player 3 score", set the maximum to 10000000 and the value to 0.</li>
      </ol>
    </li>

    <li>Draw player 3's inventory.

      <ol>
        <li>In the project tree, locate and edit Maps-&gt;Overlay for 3 players-&gt;Layers-&gt;Inventory-&gt;Plans-&gt;Player 3 Grapes.</li>

        <li>Select "Add New Rule" from the Plan menu.</li>

        <li>Set the Rule name to "Draw player 3 grape inventory".</li>

        <li>Select "DrawCounterAsTile" from the rule function dropdown combo box.</li>

        <li>Set TileIndex to 55 (the grape tile), counter to Counter.Player_3_grapes (from the dropdown list), and style to PlanBase.DrawStyle.RepeatRightToCounter (from the dropdown list).</li>

        <li>In the project tree, locate and edit Maps-&gt;Overlay for 3 players-&gt;Layers-&gt;Inventory-&gt;Plans-&gt;Player 3 Cherries.</li>

        <li>Select "Add New Rule" from the Plan menu.</li>

        <li>Set the Rule name to "Draw player 3 cherry inventory".</li>

        <li>Select "DrawCounterAsTile" from the rule function dropdown combo box.</li>

        <li>Set TileIndex to 54 (the cherry tile), counter to Counter.Player_3_cherries, and style to PlanBase.DrawStyle.RepeatRightToCounter.</li>

        <li>In the project tree, locate and edit Maps-&gt;Overlay for 3 players-&gt;Layers-&gt;Inventory-&gt;Plans-&gt;Player 3 Ice Creams.</li>

        <li>Select "Add New Rule" from the Plan menu.</li>

        <li>Set the Rule name to "Draw player 3 ice cream inventory".</li>

        <li>Select "DrawCounterAsTile" from the rule function dropdown combo box.</li>

        <li>Set TileIndex to 56 (the ice cream tile), counter to Counter.Player_3_ice_cream, and style to PlanBase.DrawStyle.RepeatRightToCounter.</li>

        <li>In the project tree, locate and edit Maps-&gt;Overlay for 3 players-&gt;Layers-&gt;Inventory-&gt;Plans-&gt;Player 3 score.</li>

        <li>Select "Add New Rule" from the Plan menu.</li>

        <li>Set the Rule name to "Draw player 3 score".</li>

        <li>Select "DrawCounterWithLabel" from the rule function dropdown combo box.</li>

        <li>Set Label to "Score: " <strong>including</strong> the double-quotes, counter to Counter.Player_3_score, and color to System.Drawing.KnownColor.White.</li>
      </ol>
    </li>

    <li>Add a sprite for player 3 to the map.

      <ol>
        <li>In the project tree, locate and edit Maps-&gt;Level 1-&gt;Layers-&gt;Main-&gt;Editor.</li>

        <li>Select the "Sprites" tab.</li>

        <li>Select "Add Sprites".</li>

        <li>Select "&lt;All&gt;" from the dropdown list of sprite categories.</li>

        <li>Select the second sprite (the one that looks like the player sprite).</li>

        <li>Give the sprite a distinctive color by entering 128 into the ModulateGreen entry in the property grid.</li>

        <li>Set the "Active" property to "False" because player 3 should be inactive by default.</li>

        <li>Set the "ViewNum" property to 2. This tells the rules in the Player sprite definition that this sprite should appear in view number 2 (the third view of the 4-way split view).</li>

        <li>Select the value "Standard" as the value for the "Solidity" property.</li>

        <li>Select "Snap to Tiles" from the Edit menu.</li>

        <li>Move the mouse to position the new player sprite to the left of the existing 2 player sprites, and click once to add it. (Note the default name Player 3).</li>
      </ol>
    </li>

    <li>Fix scroll margins for smaller views.

      <ol>
        <li>Under Maps edit the "Level1" map parameters.</li>

        <li>Change ScrollMarginTop and ScrollMarginBottom from 256 to 128.</li>

        <li>Click Update.</li>
      </ol>
    </li>

    <li>Change the Level 1 map initialization logic to initialize for 3 players.

      <ol>
        <li>Edit the "ManagePlayers" plan from Maps-&gt;Level 1-&gt;Layers-&gt;Main-&gt;Plans.</li>

        <li>Expand "If map needs initialization".</li>

        <li>Select "If 2 players".</li>

        <li>Change the name to "If 3 players".</li>

        <li>Change the "right operand" parameter from "2" to "3".</li>

        <li>Select the "Activate second player" rule.</li>

        <li>Select "Add new rule" from the plan menu.</li>

        <li>Enter the name "Activate third player" for the new rule, and verify that the rule's function is ActivateSprite.</li>

        <li>Select "m_ParentLayer.m_Player_3" for the value of the "Target" parameter.</li>

        <li>Select the "Side by side view" rule. (Change the name to "Four corners view" to avoid confusion.)</li>

        <li>Change the "Layout" parameter to ViewLayout.FourCorners.</li>

        <li>Select the "Activate 2 player overlay" rule, (and change its name to "Activate 3 player overlay" to avoid confusion).</li>

        <li>Change the MapType parameter to typeof(Overlay_for_3_players_Map).</li>

        <li>Select the "Hello Player 2" rule.</li>

        <li>Select "Add new rule" from the Plan menu.</li>

        <li>Name the new rule "Hello player 3".</li>

        <li>In the "message" parameter, enter the value "Hello player 3" <strong>including</strong> the quotes.</li>

        <li>In the "options" parameter, select &lt;Specify multiple Options values&gt; and check the boxes for CustomObjects.Message.Options.Player3 and CustomObjects.Message.Options.Button2Dismiss to indicate that this message will appear in player 3's view and will be dismissed with player 3's button 2 input.</li>
      </ol>
    </li>

    <li>Map the inputs for player 3 to the player 3 sprite.

      <ol>
        <li>Under Level 1-&gt;Layers-&gt;Main-&gt;Plans, edit the "Player Inputs" plan.</li>

        <li>From the Plan menu, select "Add new rule". If no rule is selected, it should add at the end of the list. If you did not add it to the end of the rule list, make sure the rule gets moved to the end.</li>

        <li>Set the name of the new rule to "If player 3 is active".</li>

        <li>Change the rule type from "Do" to "If".</li>

        <li>Select "&gt;=" as the rule function.</li>

        <li>Select "Counter.Players.CurrentValue" as the left operand and enter 3 for the right operand.</li>

        <li>Select "Add new rule" from the Plan menu.</li>

        <li>Enter the name "Read player 3 inputs" for the rule name.</li>

        <li>Select "CustomObjects.Message.MapPlayerToInputs" as the rule function. This customized version of MapPlayerToInputs prevents the player from moving while a message is displayed.</li>

        <li>Enter 3 as the value for PlayerNumber and select m_ParentLayer.m_Player_3 as the value for Target.</li>

        <li>Check the "End If/End While" box.</li>
      </ol>
    </li>

    <li>Route player 3's inventory interactions to player 3's inventory counters.

      <ol>
        <li>Under Sprite Definitions, edit "Player".</li>

        <li>On the Rules tab, expand "Tile Interactions" and expand "If player 1".</li>

        <li>Select "Player 1 take ice cream".</li>

        <li>Select "Add Rule" from the "Sprite Definition" menu to add a new rule between "Player 1 take ice cream" and "Else player 2 take grapes".</li>

        <li>Enter the name "Else if player 2".</li>

        <li>Change the rule type to "ElseIf".</li>

        <li>Select "==" as the rule function.</li>

        <li>Select "ViewNum" as the left operand and 1 as the right operand.</li>

        <li>Select "Else player 2 take grapes (the first rule inside "Else if player 2")</li>

        <li>Change the name to "Player 2 take grapes" and change the type to "Do".</li>

        <li>Select "Else if player 2"</li>

        <li>From the "Sprite Definition" menu, select Copy Rule-&gt;Copy Selected Rule Including Children.</li>

        <li>Select "Player 2 take ice cream"</li>

        <li>Un-check the "End If/End While" box.</li>

        <li>From the "Sprite Definition" menu, select Paste Rules-&gt;Paste Below Selected Rule.</li>

        <li>Select "Else if player 21" and select "Remove Rule" from the Sprite Definition menu. Note that this will only remove the parent rule, and will cause all the children to move up a level.</li>

        <li>Expand "Tile Interactions..."-&gt;"If Player 1"-&gt;"Else If Player 2"</li>

        <li>Select "Player 2 take grapes1"</li>

        <li>Change the name to "Else player 3 take grapes" and select "Else" as the rule type.</li>

        <li>Change the "Counter" parameter from "Counter.Player_2_grapes" to "Counter.Player_3_grapes".</li>

        <li>Select and expand "Get player 2 grape points1" (change the name to "Get player 3 grape points" to avoid confusion).</li>

        <li>Select "Add grape points to player 2 score1" (change the name to "Add grape points to player 3 score" to avoid confusion).</li>

        <li>Change both paremeters that refer to "Counter.Player_2_Score.CurrentValue" to refer to "Counter.Player_3_score.CurrentValue" instead.</li>

        <li>Repeat steps r through w for the rules relating to cherries (but this time without using "Else" -- Leave "Do" instead).</li>

        <li>Select "Player 2 take ice cream1" and select "Add Rule" from the "Sprite Definition" menu to add a new rule before "End Tile Interactions".</li>

        <li>Enter the name "End if player 1" and Select "End" as the rule type.</li>
      </ol>
    </li>

    <li>Allow player 3 to use doors.

      <ol>
        <li>Under Maps-&gt;Level1-&gt;Layers-&gt;Main-&gt;Plans, Edit "Door Left".</li>

        <li>Select "If player 1 is active".</li>

        <li>Select Copy Rules-&gt;Copy Selected Rule Including Children from the Plan menu.</li>

        <li>Expand "If player 2 is active".</li>

        <li>Select the last rule ("Transport player 2 to right door") and check the "End If" box for this rule if it is not checked.</li>

        <li>Select Paste Rules-&gt;Paste Below Selected Rule from the Plan menu.</li>

        <li>Select "If player 1 is active1" and change the name to "If player 3 is active".</li>

        <li>Change the Sprite parameter to "m_ParentLayer.m_Player_3".</li>

        <li>Select "And player 1 pressing up1" and change the name to "And player 3 pressing up".</li>

        <li>Change the Sprite parameter to "m_ParentLayer.m_Player_3".</li>

        <li>Select "And player 1 in front of door1" and change the name to "And player 3 in front of door".</li>

        <li>Change the Sprite parameter to "m_ParentLayer.m_Player_3".</li>

        <li>Select "Ensure up is now seen as an old keypress for player 11" and change the name to "Ensure up is now seen as an old keypress for player 3".</li>

        <li>Change the Sprite parameter to "m_ParentLayer.m_Player_3".</li>

        <li>Select "Transport player 1 to right door1" and change the name to "Transport player 3 to right door".</li>

        <li>Change the Sprite parameter to "m_ParentLayer.m_Player_3".</li>
      </ol>
    </li>

    <li>Delete the tile "animation" for the vertical splitter. (The vertical splitter tile was set to be invisible when the number of players was an odd number so that no splitter would show up when there was only 1 player. This is not necessary and interferes with the ability to display the vertical splitter when 3 players are active.)

      <ol>
        <li>In the project tree, expand "Tilesets" and edit the "ViewSplitterTiles" tileset.</li>

        <li>From the "Mapped Tiles" dropdown list, select tile number 1.</li>

        <li>Select "Delete/Reset Tile" from the Tileset menu, and confirm.</li>
      </ol>
    </li>
  </ol>

  <p>The following activities are left as exercises for the reader:</p>

  <ul>
    <li>Routing player 3 ice cream interactions to player 3's inventory.</li>

    <li>Correcting the remainder of the rule names.</li>

    <li>Allowing player 3 to use the other door.</li>
  </ul>
</body>
</html>
